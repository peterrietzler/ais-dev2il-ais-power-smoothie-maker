# AIS DEV2IL üòà Power Smoothie Maker

Welcome to the AIS Power Smoothie Maker exercise! Ready to blend up some Python skills? This exercise will guide you through a simple project, showing you why dependency management is crucial and how `uv` can make your life easier with zero-configuration environments.

## Zero Configuration Using `uv`

üõ† Tools You'll Need
- Your terminal
- PyCharm

### Step 1: Get your personal copy of the smoothie maker repository (Fork & Clone)

First, you need to create your own copy of this repository on GitHub. This is called a "fork". A fork is a personal copy 
of another user's repository that lives on your account. Forks allow you to freely experiment with changes without 
affecting the original project.

- Go to the repository page: https://github.com/peterrietzler/ais-dev2il-ais-power-smoothie-maker
- Click the __Fork__ button in the top-right corner. Make sure that your fork contains all branches, not just the `main` branch.
- Clone your fork to your local machine.

### Step 2: Let's make our first smoothie!

Let's try to run the smoothie maker script.

```bash
python main.py
```

You will see an error like this:

üí•BOOM! It crashes!
```
Traceback (most recent call last):
  File "main.py", line 1, in <module>
    from rich.console import Console
ModuleNotFoundError: No module named 'rich'
```

This error means that the `rich` library, which our script depends on, is not installed in your Python environment, but it's
required to run the script. You could now try to install the `rich` library manually, but then you would need to start entering
configuration hell. 

### Step 3: Introducing `uv`

To solve this, we will use `uv`. 
`uv` is an extremely fast Python package installer and resolver. 
It's a single binary that can be used to create virtual environments and manage 
project dependencies, similar to `pip` and `venv` combined, but much faster.

#### Install `uv`

https://docs.astral.sh/uv/#installation

#### Initialize the Project with `uv`

Now, let's start to manage our poject wiht `uv`. In our project root directory,
run

```bash
uv init
```

üí°At this point in time, we are going to start inspecting and changing code. You should therefore
now open the project in PyCharm. IDEs like PyCharm or Visual Studio Code will automatically detect 
that you are using `uv` and will automatically configure itself to e.g. use the virtual environment 
created by `uv` for your project.

‚ö†Ô∏èIf you already used PyCharm up to this point, quit it, delete the `.idea` directory in your project directory
and open the project again in PyCharm.

`uv` created a few files in your project directory. Let's briefly understand what they are:

- **`pyproject.toml`**: The configuration file for your Python. It contains metadata about your project and its required environment.
You can either directly edit this file or manage it via `uv` commands (more on this later).
- **`.python-version`**: A file that specifies the Python version for this project. Do not edit this file. It's managed by `uv`. 
- **`uv.lock`**: This file contains the exact versions of all your dependencies. This ensures that anyone who sets up the project 
will have the exact same versions, creating a reproducible environment. Do not edit this file. It's managed by `uv`.


#### Add the `rich` Dependency

Next, we need to add the `rich` library to our project.

```bash
uv add rich
```

This command will download and install the `rich` library and also add it as a dependency 
to your `pyproject.toml` file. `uv` automatically manages the virtual environment for your
project in the `.venv` directory. 

Have a look at the `pyproject.toml` file to see that the `rich` library is now listed as a dependency.

üí°If you are more comfortable with editing the `pyproject.toml` file directly, you can also do that. 
You could have simply added the `rich` dependency to the `dependencies` section of the file. If you do 
so you will need to e.g. run `uv sync` to install the new dependency.

####  Let's make our first smoothie! (Again)

Now that we have our dependency installed, let's run the script again, 
but this time using `uv`. It is going to take care for you that your project's 
environment is used correctly.

```bash
uv run main.py
```

‚úÖVoila! The smoothie maker should now run successfully and print a 
colorful message to your terminal.

### Step 4 - Let your team mate prepare a smoothie!

Now that you have a working setup, it's time to share your work.

**Commit and Push Your Changes:**
    Add the new files to git, commit them, and push them to your forked repository on GitHub.

ü§ù **Partner Up!**
    Your partner can now clone your repository and just execute `uv run main.py`. `uv` will automatically set up the environment 
    and then prepare a smoothie.


### Step 5 - Let's have some fun while waiting for our smoothie!

To show how easy it is to manage our environment, one partner will now add a new feature: telling a joke while the smoothie is being prepared.

**Add the `pyjokes` Dependency:**

`pyjokes` is a python library for that generateds jokes for programmers. Let's add it with `uv`:
    
```bash
uv add pyjokes
```

`uv` will download the library and add it to your `pyproject.toml` and `uv.lock` files.

**Add the Joke Code:**

Open `main.py` and add the following code right after the "Starting to make" output:

```python
import pyjokes
joke = pyjokes.get_joke()
console.print(f"[bold cyan]Let me enlighten you with a joke while you wait: {joke}[/bold cyan]\n")
```

**And prepare another smoothie:**
```bash
uv run main.py
``` 

‚úÖ See how it works! You have a smoothie and a joke.

**Commit and Push:**
Commit and push your changes so your partner can get the new feature.

ü§ù **Partner Up (Again)!**
The second partner can now pull the changes from the repository. Then, he can simply run:
```bash
uv run main.py
```
`uv` will see the changes in the `uv.lock` file, automatically install the new `pyjokes` dependency, and run the script. Zero manual configuration needed!

### üèÜ Summary Cheat Sheet

| Command | Description |
|---|---|
| `uv init` | Initializes a new project, creating `pyproject.toml`. |
| `uv add <package>` | Adds a dependency to the project and installs it. |
| `uv remove <package>` | Removes a dependency from the project. |
| `uv run ...` | Runs a command within the project's managed environment. |
| `uv sync` | Installs dependencies from `uv.lock` to exactly recreate the environment. |


| File              | What it does                                                                    |
|-------------------|---------------------------------------------------------------------------------|
| `pyproject.toml`  | Lists what your project needs (e.g. the python version or compatible libraries) |
| `uv.lock`         | Remembers the exact version of every tiny detail so it's identical for everyone |
| `.python-version` | Tells `uv` which Python version to use                                          |
| `.venv`           | Contains the `uv` managed Pytyhon virtual environment                           |




### üöÄ Level Up

Finished early? Put your `uv` skills to the next level with these "Pro" moves.


#### `uv tree`
This command displays the dependency tree of your project. It's incredibly useful for a few reasons:
- **Visibility**: See exactly which packages are included and which package brought them in.
- **Debugging**: Helps you track down where a specific dependency is coming from, which is a lifesaver for resolving version conflicts.

Try it out:
```bash
uv tree
```